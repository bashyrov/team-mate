{% extends "base.html" %}
{% block content %}

<div class="text-center mb-5">
    <h1 class="display-5 fw-bold">üèÜ Leaderboard</h1>
    <p class="text-muted">Check out the top developers and their average project scores</p>
</div>

<form action="" method="get" class="d-flex justify-content-center align-items-center gap-2 mb-5 flex-wrap">
    <div style="flex: 1; max-width: 300px;">
        {{ search_form.username }}
    </div>
    <button type="submit" class="btn btn-primary">Find Team'Mates</button>
</form>

{% if developers %}
<div class="table-responsive shadow-sm rounded">
  <table class="table table-hover align-middle mb-0">
    <thead class="table-dark">
      <tr>
        <th scope="col">Rank</th>
        <th scope="col">Developer</th>
        <th scope="col">Position</th>
        <th scope="col">Avg. Project Score</th>
      </tr>
    </thead>
    <tbody>
      {% for dev in developers %}
      <tr class="align-middle">
        <td class="fw-bold">{{ forloop.counter0|add:start_rank|add:1 }}</td>
        <td>
          <a href="{% url 'users:profile' dev.pk %}" class="text-decoration-none fw-semibold text-primary">
            {{ dev.username }}
          </a>
        </td>
        <td>{{ dev.get_position_display }}</td>
        <td>
          {% if dev.avg_score %}
            <span class="badge bg-success">{{ dev.avg_score|floatformat:2 }}</span>
          {% else %}
            <span class="text-muted">‚Äì</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% include "includes/pagination.html" %}

{% else %}
<div class="alert alert-secondary text-center">
  <h5 class="mb-0">No developers yet.</h5>
</div>
{% endif %}

{% endblock %}
