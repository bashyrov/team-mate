{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">ğŸ† Leaderboard</h2>

<form action="" method="get" class="d-flex align-items-center gap-2 mb-4">
  <div style="flex: 1; max-width: 300px;">
    {{ search_form.username }}
  </div>
  <button type="submit" class="btn btn-primary">Find Team'Mates</button>
</form>

{% if developers %}
  <table class="table table-striped table-hover align-middle shadow-sm rounded">
    <thead class="table-light">
      <tr>
        <th>Rank</th>
        <th>Developer</th>
        <th>Position</th>
        <th>Avg. Project Score</th>
      </tr>
    </thead>
    <tbody>
      {% for dev in developers %}
      <tr>
        <td>{{ forloop.counter0|add:start_rank|add:1 }}</td>
        <td><a href="{% url 'users:profile' dev.pk %}" class="text-decoration-none fw-semibold">{{ dev.username }}</a></td>
        <td>{{ dev.get_position_display }}</td>
        <td>{{ dev.avg_score|floatformat:2|default:"â€“" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% include "includes/pagination.html" %}
{% else %}
  <h5>No developers yet.</h5>
{% endif %}

{% endblock %}
